{
  "metadata": {
    "id": "single-page-application",
    "name": "Single Page Application",
    "version": "1.0.0",
    "description": "Standalone form rendered as a single page with sectioned steps"
  },
  "flowConfig": {
    "type": "single",
    "navigation": "sections"
  },
  "steps": [
    {
      "id": "personal-info",
      "name": "Personal Information",
      "description": "Basic borrower information",
      "order": 1,
      "required": true,
      "fields": [
        {
          "$ref": "../../shared-fields/personal-info-fields.json#/first_name",
          "label": "Given name",
          "validation": [
            {
              "$ref": "../../shared-fields/validation-rules.json#/required"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/name/minLength"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/name/maxLength"
            }
          ]
        },
        {
          "$ref": "../../shared-fields/personal-info-fields.json#/last_name",
          "validation": [
            {
              "$ref": "../../shared-fields/validation-rules.json#/required"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/name/minLength"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/name/maxLength"
            }
          ]
        },
        {
          "$ref": "../../shared-fields/personal-info-fields.json#/email",
          "validation": [
            {
              "$ref": "../../shared-fields/validation-rules.json#/required"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/email"
            }
          ]
        },
        {
          "$ref": "../../shared-fields/personal-info-fields.json#/mobile",
          "validation": [
            {
              "$ref": "../../shared-fields/validation-rules.json#/required"
            },
            {
              "$ref": "../../shared-fields/validation-rules.json#/phoneUS"
            }
          ]
        },
        {
          "id": "lien_Position",
          "name": "lien_Position",
          "type": "radio",
          "label": "Lien Position",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select the lien position"
            }
          ],
          "autoTriggers": {
            "firstLien": { "field": "mortgage_type", "value": "na" },
            "secondLien": { "field": "mortgage_type", "value": "ces" }
          },
          "options": [
            {
              "value": "firstLien",
              "label": "First Lien"
            },
            {
              "value": "secondLien",
              "label": "Second Lien"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 6
          }
        },
        {
          "id": "mortgage_type",
          "name": "mortgage_type",
          "type": "dropdown",
          "label": "Mortgage Type",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select the mortgage type"
            }
          ],
          "autoTriggers": {
            "na": { "field": "lien_Position", "value": "firstLien" },
            "fha": { "field": "lien_Position", "value": "firstLien" },
            "va": { "field": "lien_Position", "value": "firstLien" },
            "ces": { "field": "lien_Position", "value": "secondLien" },
            "heloc": { "field": "lien_Position", "value": "secondLien" }
          },
          "options": [
            {
              "value": "na",
              "label": "Non Agency"
            },
            {
              "value": "fha",
              "label": "FHA"
            },
            {
              "value": "va",
              "label": "VA"
            },
            {
              "value": "ces",
              "label": "CES"
            },
            {
              "value": "heloc",
              "label": "HELOC"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 6
          }
        }
      ]
    },
    {
      "id": "property-info",
      "name": "Property Information",
      "description": "Current property details",
      "order": 2,
      "required": true,
      "fields": [
        {
          "id": "property_city",
          "type": "text",
          "name": "property_city",
          "label": "City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter the property city"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter city"
        },
        {
          "id": "property_state",
          "type": "dropdown",
          "name": "property_state",
          "label": "State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select a state"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ]
        },
        {
          "id": "property_zip",
          "type": "text",
          "name": "property_zip",
          "label": "ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345"
        },
        {
          "id": "lived_more_than_2_years",
          "type": "radio",
          "name": "lived_more_than_2_years",
          "label": "Have you lived here for more than 2 years?",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select whether you have lived here for more than 2 years"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ]
        },
        {
          "id": "previous_address_label",
          "type": "label",
          "name": "previous_address_label",
          "text": "Previous Address",
          "grid": {
            "xs": 12
          },
          "style": {
            "fontWeight": "bold",
            "marginTop": "16px",
            "marginBottom": "8px"
          },
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_city",
          "type": "text",
          "name": "previous_city",
          "label": "Previous City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter previous city",
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_state",
          "type": "dropdown",
          "name": "previous_state",
          "label": "Previous State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ],
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_zip",
          "type": "text",
          "name": "previous_zip",
          "label": "Previous ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345",
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "account-type",
      "name": "Account Type",
      "description": "Application type selection",
      "order": 3,
      "required": true,
      "fields": [
        {
          "id": "application_type",
          "type": "radio",
          "name": "application_type",
          "label": "Application Type",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "individual",
              "label": "Individual"
            },
            {
              "value": "joint",
              "label": "Joint"
            }
          ]
        }
      ]
    },
    {
      "id": "joint-property-info",
      "name": "Joint Property Information",
      "description": "Co-borrower property details",
      "order": 4,
      "required": false,
      "conditions": [
        {
          "===": [
            {
              "var": "application_type"
            },
            "joint"
          ]
        }
      ],
      "fields": [
        {
          "id": "joint_property_city",
          "type": "text",
          "name": "joint_property_city",
          "label": "Co-borrower City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter co-borrower city"
        },
        {
          "id": "joint_property_state",
          "type": "dropdown",
          "name": "joint_property_state",
          "label": "Co-borrower State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ]
        },
        {
          "id": "joint_property_zip",
          "type": "text",
          "name": "joint_property_zip",
          "label": "Co-borrower ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345"
        },
        {
          "id": "joint_lived_more_than_2_years",
          "type": "radio",
          "name": "joint_lived_more_than_2_years",
          "label": "Has co-borrower lived here for more than 2 years?",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ]
        },
        {
          "id": "joint_previous_address_label",
          "type": "label",
          "name": "joint_previous_address_label",
          "text": "Co-borrower Previous Address",
          "grid": {
            "xs": 12
          },
          "style": {
            "fontWeight": "bold",
            "marginTop": "16px",
            "marginBottom": "8px"
          },
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_city",
          "type": "text",
          "name": "joint_previous_city",
          "label": "Co-borrower Previous City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter co-borrower previous city",
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_state",
          "type": "dropdown",
          "name": "joint_previous_state",
          "label": "Co-borrower Previous State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ],
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_zip",
          "type": "text",
          "name": "joint_previous_zip",
          "label": "Co-borrower Previous ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345",
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        }
      ]
    }
  ],
  "validation": {
    "globalRules": [
      {
        "type": "crossField",
        "fields": ["email", "mobile"],
        "rule": "unique",
        "message": "Email and mobile must be unique across all applicants"
      }
    ]
  }
}

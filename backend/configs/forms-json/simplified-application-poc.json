{
  "metadata": {
    "id": "simplified-application-poc",
    "name": "Simplified Loan Application POC",
    "version": "1.0.0",
    "description": "POC demonstrating centralized form configuration with conditional steps"
  },
  "flowConfig": {
    "type": "linear",
    "navigation": "stepped"
  },
  "steps": [
    {
      "id": "personal-info",
      "name": "Personal Information",
      "description": "Basic borrower information",
      "order": 1,
      "required": true,
      "fields": [
        {
          "id": "first_name",
          "type": "text",
          "name": "first_name",
          "label": "First Name",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter your first name"
            },
            {
              "rule": "minLength",
              "value": 2,
              "message": "First name must be at least 2 characters"
            },
            {
              "rule": "maxLength",
              "value": 50,
              "message": "First name cannot exceed 50 characters"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 6
          },
          "placeholder": "Enter your first name"
        },
        {
          "id": "last_name",
          "type": "text",
          "name": "last_name",
          "label": "Last Name",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter your last name"
            },
            {
              "rule": "minLength",
              "value": 2,
              "message": "Last name must be at least 2 characters"
            },
            {
              "rule": "maxLength",
              "value": 50,
              "message": "Last name cannot exceed 50 characters"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 6
          },
          "placeholder": "Enter your last name"
        },
        {
          "id": "email",
          "type": "email",
          "name": "email",
          "label": "Email Address",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter your email address"
            },
            {
              "rule": "email",
              "message": "Please enter a valid email address"
            }
          ],
          "grid": {
            "xs": 12
          },
          "placeholder": "Enter your email address"
        },
        {
          "id": "mobile",
          "type": "phone",
          "name": "mobile",
          "label": "Mobile Number",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter your phone number"
            },
            {
              "rule": "phoneUS",
              "message": "Please enter a valid US phone number"
            }
          ],
          "grid": {
            "xs": 12
          },
          "placeholder": "(555) 123-4567"
        }
      ]
    },
    {
      "id": "property-info",
      "name": "Property Information",
      "description": "Current property details",
      "order": 2,
      "required": true,
      "fields": [
        {
          "id": "property_city",
          "type": "text",
          "name": "property_city",
          "label": "City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter the property city"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter city"
        },
        {
          "id": "property_state",
          "type": "dropdown",
          "name": "property_state",
          "label": "State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select a state"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ]
        },
        {
          "id": "property_zip",
          "type": "text",
          "name": "property_zip",
          "label": "ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345"
        },
        {
          "id": "lived_more_than_2_years",
          "type": "radio",
          "name": "lived_more_than_2_years",
          "label": "Have you lived here for more than 2 years?",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please select whether you have lived here for more than 2 years"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ]
        },
        {
          "id": "previous_address_label",
          "type": "label",
          "name": "previous_address_label",
          "text": "Previous Address",
          "grid": {
            "xs": 12
          },
          "style": {
            "fontWeight": "bold",
            "marginTop": "16px",
            "marginBottom": "8px"
          },
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_city",
          "type": "text",
          "name": "previous_city",
          "label": "Previous City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter previous city",
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_state",
          "type": "dropdown",
          "name": "previous_state",
          "label": "Previous State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ],
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "previous_zip",
          "type": "text",
          "name": "previous_zip",
          "label": "Previous ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345",
          "conditions": [
            {
              "===": [
                {
                  "var": "lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "account-type",
      "name": "Account Type",
      "description": "Application type selection",
      "order": 3,
      "required": true,
      "fields": [
        {
          "id": "application_type",
          "type": "radio",
          "name": "application_type",
          "label": "Application Type",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "individual",
              "label": "Individual"
            },
            {
              "value": "joint",
              "label": "Joint"
            }
          ]
        }
      ]
    },
    {
      "id": "joint-property-info",
      "name": "Joint Property Information",
      "description": "Co-borrower property details",
      "order": 4,
      "required": false,
      "conditions": [
        {
          "===": [
            {
              "var": "application_type"
            },
            "joint"
          ]
        }
      ],
      "fields": [
        {
          "id": "joint_property_city",
          "type": "text",
          "name": "joint_property_city",
          "label": "Co-borrower City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter co-borrower city"
        },
        {
          "id": "joint_property_state",
          "type": "dropdown",
          "name": "joint_property_state",
          "label": "Co-borrower State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ]
        },
        {
          "id": "joint_property_zip",
          "type": "text",
          "name": "joint_property_zip",
          "label": "Co-borrower ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345"
        },
        {
          "id": "joint_lived_more_than_2_years",
          "type": "radio",
          "name": "joint_lived_more_than_2_years",
          "label": "Has co-borrower lived here for more than 2 years?",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12
          },
          "options": [
            {
              "value": "yes",
              "label": "Yes"
            },
            {
              "value": "no",
              "label": "No"
            }
          ]
        },
        {
          "id": "joint_previous_address_label",
          "type": "label",
          "name": "joint_previous_address_label",
          "text": "Co-borrower Previous Address",
          "grid": {
            "xs": 12
          },
          "style": {
            "fontWeight": "bold",
            "marginTop": "16px",
            "marginBottom": "8px"
          },
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_city",
          "type": "text",
          "name": "joint_previous_city",
          "label": "Co-borrower Previous City",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "Enter co-borrower previous city",
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_state",
          "type": "dropdown",
          "name": "joint_previous_state",
          "label": "Co-borrower Previous State",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "This field is required"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "options": [
            {
              "value": "CA",
              "label": "California"
            },
            {
              "value": "NY",
              "label": "New York"
            },
            {
              "value": "TX",
              "label": "Texas"
            },
            {
              "value": "FL",
              "label": "Florida"
            },
            {
              "value": "IL",
              "label": "Illinois"
            },
            {
              "value": "WA",
              "label": "Washington"
            },
            {
              "value": "AZ",
              "label": "Arizona"
            },
            {
              "value": "CO",
              "label": "Colorado"
            },
            {
              "value": "NV",
              "label": "Nevada"
            },
            {
              "value": "OR",
              "label": "Oregon"
            }
          ],
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        },
        {
          "id": "joint_previous_zip",
          "type": "text",
          "name": "joint_previous_zip",
          "label": "Co-borrower Previous ZIP Code",
          "required": true,
          "validation": [
            {
              "rule": "required",
              "message": "Please enter a ZIP code"
            },
            {
              "rule": "zipCode",
              "message": "Please enter a valid ZIP code"
            }
          ],
          "grid": {
            "xs": 12,
            "sm": 4
          },
          "placeholder": "12345",
          "conditions": [
            {
              "===": [
                {
                  "var": "joint_lived_more_than_2_years"
                },
                "no"
              ]
            }
          ]
        }
      ]
    }
  ],
  "validation": {
    "globalRules": [
      {
        "type": "crossField",
        "fields": [
          "email",
          "mobile"
        ],
        "rule": "unique",
        "message": "Email and mobile must be unique across all applicants"
      }
    ]
  },
  "transformations": {
    "inbound": {
      "borrower.personal.firstName": "first_name",
      "borrower.personal.lastName": "last_name",
      "borrower.personal.email": "email",
      "borrower.personal.mobile": "mobile",
      "property.current.city": "property_city",
      "property.current.state": "property_state",
      "property.current.zip": "property_zip",
      "property.residencyInfo.livedMoreThan2Years": "lived_more_than_2_years",
      "property.previous.city": "previous_city",
      "property.previous.state": "previous_state",
      "property.previous.zip": "previous_zip",
      "application.type": "application_type",
      "jointBorrower.property.current.city": "joint_property_city",
      "jointBorrower.property.current.state": "joint_property_state",
      "jointBorrower.property.current.zip": "joint_property_zip",
      "jointBorrower.property.residencyInfo.livedMoreThan2Years": "joint_lived_more_than_2_years",
      "jointBorrower.property.previous.city": "joint_previous_city",
      "jointBorrower.property.previous.state": "joint_previous_state",
      "jointBorrower.property.previous.zip": "joint_previous_zip"
    },
    "outbound": {
      "first_name": "borrower.personal.firstName",
      "last_name": "borrower.personal.lastName",
      "email": "borrower.personal.email",
      "mobile": "borrower.personal.mobile",
      "property_city": "property.current.city",
      "property_state": "property.current.state",
      "property_zip": "property.current.zip",
      "lived_more_than_2_years": "property.residencyInfo.livedMoreThan2Years",
      "previous_city": "property.previous.city",
      "previous_state": "property.previous.state",
      "previous_zip": "property.previous.zip",
      "application_type": "application.type",
      "joint_property_city": "jointBorrower.property.current.city",
      "joint_property_state": "jointBorrower.property.current.state",
      "joint_property_zip": "jointBorrower.property.current.zip",
      "joint_lived_more_than_2_years": "jointBorrower.property.residencyInfo.livedMoreThan2Years",
      "joint_previous_city": "jointBorrower.property.previous.city",
      "joint_previous_state": "jointBorrower.property.previous.state",
      "joint_previous_zip": "jointBorrower.property.previous.zip"
    },
    "advanced": {
      "arrayFieldPatterns": {
        "borrowers[].personal.firstName": [
          {
            "path": "borrowers",
            "type": "arrayField",
            "field": "firstName"
          }
        ],
        "borrowers[].personal.lastName": [
          {
            "path": "borrowers",
            "type": "arrayField",
            "field": "lastName"
          }
        ]
      },
      "conditionalPatterns": {
        "first_name": [
          {
            "path": "primaryBorrower.firstName",
            "condition": "notEmpty"
          },
          {
            "path": "applicant.firstName",
            "condition": "notEmpty"
          },
          {
            "default": ""
          }
        ]
      },
      "complexPaths": {
        "loanData.DEAL.EXTENSION.OTHER['saaf:DEAL_EXTENSION']['saaf:ApplicationData'].borrowers": "borrowers"
      }
    }
  }
}